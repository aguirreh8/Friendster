<!DOCTYPE html>
<html>
	<head>
		<title>Friendster - Survey</title>
		<meta charset="UTF-8" />
		<link rel="stylesheet" type="text/css" href="assets/reset.css" />
		<link 
			rel="stylesheet" 
			href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
			integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
		<link rel="stylesheet" type="text/css" href="assets/style.css" />
		<script src="https://code.jquery.com/jquery.js"></script>
		<script 
			src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" 
			integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" 
			crossorigin="anonymous"></script>
		<script 
			src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" 
			integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" 
			crossorigin="anonymous"></script>
		<script type="text/javascript" src="assets/javascript.js"></script>
<!-- This needs to go to style.css -->
		<style>
			.survey-answer {
				width: 200px;
				height: 25px;
				border-radius: 5px;
				box-shadow: 0px 3px 25px -9px rgba(0,0,0,0.75);
				background: linear-gradient(
					to bottom, 
					rgba(255,255,255,1) 0%,
					rgba(243,243,243,1) 50%,
					rgba(237,237,237,1) 51%,
					rgba(255,255,255,1) 100%);
			}

			.text-bars {
				width: 80%;
				height: 40px;
				border-radius: 5px;
				font-size: 18px;
			}

			.friend-img {
				width: 200px;
				height: 200px;
			}

		</style>
<!-- End of style.css -->
	</head>
	<body>
		<div class="container">
			<h1>Survey Questions</h1>
			<hr />
			<input type="text" name="nameInput" id="nameInput" class="text-bars"/>
			<br />
			<br />
			<input type="text" name="imgInput" id="imgInput" class="text-bars" />
			<hr />
			<h3>Question 1</h3>
			<h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
			<select id="surveyAnswer1" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 2</h3>
			<h5>Generally speaking, you rely more on your experience than your imagination.</h5>
			<select id="surveyAnswer2" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 3</h3>
			<h5>You find it easy to stay relaxed and focused even when there is some pressure.</h5>
			<select id="surveyAnswer3" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 4</h3>
			<h5>You rarely do something just out of sheer curiosity.</h5>
			<select id="surveyAnswer4" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 5</h3>
			<h5>People can rarely upset you.</h5>
			<select id="surveyAnswer5" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 6</h3>
			<h5>It is often difficult for you to relate to other people’s feelings.</h5>
			<select id="surveyAnswer6" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 7</h3>
			<h5>In a discussion, truth should be more important than people’s sensitivities.</h5>
			<select id="surveyAnswer7" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 8</h3>
			<h5>You rarely get carried away by fantasies and ideas.</h5>
			<select id="surveyAnswer8" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 9</h3>
			<h5>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h5>
			<select id="surveyAnswer9" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<h3>Question 10</h3>
			<h5>You feel more energetic after spending time with a group of people.</h5>
			<select id="surveyAnswer10" class="survey-answer">
				<option value="" selected>Choose your answer</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<hr />
			<button id="submitBtn" type="button" class="btn btn-primary btn-lg btn-block"><span class="glyphicon glyphicon-ok"></span>Submit</button>
			<br/>
			<a href="api/friendslist">API Friends List</a> | <a>Github Repo</a>
			<br />
		</div>

		<div class="modal" tableindex="-1" id="myModal" role="dialog" data-backdrop="false">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h1 class="modal-title">Best Match</h1>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		        <h2 id="friendName"></h2>
		        <img id="friendPic" src="" class="friend-img" />
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		  </div>
		</div>
<!-- This needs to go to javascript.js -->
		<script type="text/javascript">
			$("#submitBtn").click(function() {

				const validateForm = () => {
					let isValid = true;
					$(".text-bars").each(function() {
						if($(this).val() === "") {
							isValid = false;
						}
					});

					$(".survey-answer").each(function() {
						if($(this).val() === "") {
							isValid = false;
						}
					})

					return isValid;
				}

				if (validateForm()) {

					const newFriend = {
						name: $('#nameInput').val(),
						photo: $('#imgInput').val(),
						scores: [
							$("#surveyAnswer1").val(),
							$("#surveyAnswer2").val(),
							$("#surveyAnswer3").val(),
							$("#surveyAnswer4").val(),
							$("#surveyAnswer5").val(),
							$("#surveyAnswer6").val(),
							$("#surveyAnswer7").val(),
							$("#surveyAnswer8").val(),
							$("#surveyAnswer9").val(),
							$("#surveyAnswer10").val()
						]
					}

					$.post("/api/findFriend", newFriend)
					.then(function(data){
						console.log(data);
						$("#friendName").text(data.name);
						$("#friendPic").attr("src", data.photo);
					})

					$("#myModal").modal({
						backdrop: "show"				
					});
					$(".modal-backdrop").addClass("fade in");
				}
				else {
					alert("Please fill in the form");
				}
			})
		</script>
<!-- End of javascript.js -->
	</body>
</html>